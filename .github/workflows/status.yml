name: Project Status

# æ¯å¤©UTCæ™‚é–“00:00åŸ·è¡Œï¼Œæˆ–æ‰‹å‹•è§¸ç™¼
on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  project-status:
    name: å°ˆæ¡ˆç‹€æ…‹æª¢æŸ¥
    runs-on: ubuntu-latest

    steps:
      - name: æª¢å‡ºç¨‹å¼ç¢¼
        uses: actions/checkout@v4

      - name: è¨­å®šJDK 11
        uses: actions/setup-java@v4
        with:
          java-version: '11'
          distribution: 'temurin'

      - name: è³¦äºˆGradleåŸ·è¡Œæ¬Šé™
        run: chmod +x gradlew

      - name: é¡¯ç¤ºå°ˆæ¡ˆè³‡è¨Š
        run: ./gradlew projectInfo

      - name: æª¢æŸ¥ä¾è³´é—œä¿‚æ›´æ–°
        run: ./gradlew dependencyUpdates || true

      - name: ç”¢ç”Ÿå°ˆæ¡ˆå ±å‘Š
        run: |
          echo "# å°ˆæ¡ˆç‹€æ…‹å ±å‘Š ðŸ“Š" > project_status.md
          echo "" >> project_status.md
          echo "**ç”Ÿæˆæ™‚é–“**: $(date)" >> project_status.md
          echo "" >> project_status.md
          echo "## Gradleè³‡è¨Š" >> project_status.md
          echo "\`\`\`" >> project_status.md
          ./gradlew projectInfo >> project_status.md
          echo "\`\`\`" >> project_status.md
          echo "" >> project_status.md
          echo "## å°ˆæ¡ˆçµæ§‹" >> project_status.md
          echo "\`\`\`" >> project_status.md
          find . -type f -name "*.kt" -o -name "*.java" | wc -l | xargs echo "Kotlin/Javaæª”æ¡ˆæ•¸é‡:" >> project_status.md
          find . -type f -name "*.xml" | wc -l | xargs echo "XMLæª”æ¡ˆæ•¸é‡:" >> project_status.md
          echo "\`\`\`" >> project_status.md

      - name: ä¸Šå‚³ç‹€æ…‹å ±å‘Š
        uses: actions/upload-artifact@v4
        with:
          name: project-status-report
          path: project_status.md